# 01. 아키텍처 및 디렉토리 구조

이 문서는 '결혼 청첩장 웹 서비스' 프로젝트의 확장성과 유지보수성을 고려한 아키텍처 및 폴더 구조를 제안합니다.

## 1. 설계 원칙

1.  **관심사 분리 (SoC)**: UI, 비즈니스 로직, 데이터 접근, 유효성 검증 등 각 코드의 역할을 명확히 분리합니다.
2.  **프레임워크 활용**: Next.js App Router의 기능을 최대한 활용하고, 그 철학을 따릅니다.
3.  **직관성**: 새로운 개발자가 프로젝트에 합류했을 때, 폴더 구조만 보고도 코드의 의도를 파악할 수 있어야 합니다.

## 2. 최종 폴더 구조

논의된 내용을 종합하여 다음과 같은 최종 폴더 구조를 제안합니다.

```
src/
├── app/
│   └── api/
├── components/
├── constants/
├── context/
├── hooks/
├── lib/
├── models/
├── schemas/
├── services/
├── store/
└── types/
```

## 3. 각 폴더의 역할

### `app/` - 라우팅과 UI 진입점
Next.js의 규약에 따라 모든 URL 경로와 페이지 UI의 진입점 역할을 합니다. `page.tsx`, `layout.tsx` 등을 사용해 구성합니다.

### `app/api/` - 백엔드 API 엔드포인트
Next.js의 파일 기반 라우팅을 따르는 API 서버의 역할을 합니다. 각 폴더와 `route.ts` 파일은 REST API 엔드포인트가 되며, 클라이언트와의 데이터 통신, 또는 외부 서비스와의 서버 간 통신을 담당합니다.

### `components/` - 재사용 가능한 UI 조각
버튼, 카드, 입력창처럼 여러 페이지에서 공통으로 사용될 순수 UI 컴포넌트를 보관합니다. **아토믹 디자인 패턴(Atomic Design Pattern)을 적용하여 Atoms, Molecules, Organisms, Templates, Pages 등으로 세분화하여 관리합니다.**

- **Atoms**: 더 이상 분해할 수 없는 가장 작은 단위의 UI 요소입니다 (예: 버튼, 라벨, 입력 필드).
- **Molecules**: 여러 Atoms가 결합하여 특정 기능을 수행하는 단위입니다 (예: 검색 폼, 내비게이션 메뉴).
- **Organisms**: Molecules와 Atoms가 모여서 더 복잡하고 독립적인 UI 섹션을 구성합니다 (예: 헤더, 푸터, 상품 목록 섹션).
- **Templates**: Organisms를 조합하여 페이지의 레이아웃과 구조를 정의합니다. 실제 콘텐츠 대신 플레이스홀더를 사용하여 구조에 집중합니다.
- **Pages**: Templates에 실제 콘텐츠를 채워 넣은 최종적인 UI로, `app` 디렉토리의 라우트와 직접 연결됩니다.

### `constants/` - 애플리케이션 상수
애플리케이션 전반에서 재사용되는 변경되지 않는 값들을 보관합니다. 라우팅 경로, 유효성 검증 메시지 등을 '도메인' 또는 '기능'별 파일로 분리하여 관리합니다.

### `context/` - React Context 상태 관리
React Context API를 사용하여 특정 컴포넌트 트리 내에서 상태를 공유할 때 사용됩니다. 전역 상태 관리를 위한 `store/`와 달리, 특정 영역(예: 테마 상태)에서만 필요한 상태를 주입하는 데 적합합니다.

### `hooks/` - 클라이언트 상태 로직
여러 컴포E트에서 재사용 가능한 클라이언트 측 상태 로직(Custom Hooks)을 담습니다.

### `lib/` - 범용 유틸리티
프로젝트 전반에서 사용되는 지원 코드(toolbox)를 포함합니다. `utils`와 역할이 유사하나, 본 프로젝트에서는 `lib` 폴더로 통합하여 사용합니다.
- **`db.ts`**: MongoDB 데이터베이스 연결 설정.
- **`utils.ts`**: 날짜 포맷팅, 문자열 처리 등 범용 헬퍼 함수.
- **`auth.ts`**: 인증 관련 저수준 로직 (예: 세션 관리, 토큰 처리).

### `models/` - 데이터베이스 모델
데이터베이스에 데이터가 어떤 형태로 저장될지를 정의합니다. Mongoose 스키마와 모델을 이곳에 정의하며, 데이터베이스와의 직접적인 상호작용을 담당합니다. **(데이터의 '저장소' 형태)**

### `schemas/` - 데이터 유효성 검증 스키마
사용자 입력, API 요청 등 애플리케이션 경계에서 데이터의 형식을 검증하는 Zod 스키마를 보관합니다. `models`와 형태가 다를 수 있으며, 비밀번호 확인 필드처럼 검증에만 사용되는 필드를 포함할 수 있습니다. **(데이터의 '입출력' 형태)**

### `services/` - 핵심 비즈니스 로직
애플리케이션의 핵심 로직을 처리하는 서비스 계층입니다. `models`, `lib` 등을 사용하여 실제 기능을 완성하는 역할을 합니다.

### `store/` - 전역 클라이언트 상태
Zustand 등을 사용한 전역 상태(예: 로그인한 유저 정보)를 관리합니다.

### `types/` - 공통 타입 정의
여러 도메인과 기능에 걸쳐 공통으로 재사용되는 핵심 데이터 타입을 정의합니다. `User`, `Order`와 같은 핵심 엔티티 타입을 이곳에 정의하여 프로젝트 전체의 타입 일관성을 유지하는 '신뢰할 수 있는 단일 출처(Single Source of Truth)' 역할을 합니다.
